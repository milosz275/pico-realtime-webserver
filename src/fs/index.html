<!DOCTYPE html>
<html lang="en" class="">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Pico W</title>
        <link rel="icon" type="image/icon" href="/favicon.ico">
        <style>
            body {
                font-family: Arial, sans-serif;
                background-color: #f0f0f0;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                margin: 0;
            }
            .container {
                background-color: #fff;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                text-align: center;
            }
            h1 {
                margin-bottom: 20px;
            }
            input[type="password"] {
                width: 80%;
                padding: 10px;
                margin: 10px 0;
                border: 1px solid #ccc;
                border-radius: 4px;
            }
            input[type="submit"] {
                background-color: #4CAF50;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            }
            input[type="submit"]:hover {
                background-color: #45a049;
            }
        </style>
        <script>
            function submitForm(event) {
                event.preventDefault();
                const password = document.getElementById('password').value;
                fetch(`/auth.cgi?password=${encodeURIComponent(password)}`, {
                    method: 'GET',
                    credentials: 'same-origin' // This ensures cookies are sent along with the request
                })
                    .then(response => {
                        if (response.redirected) {
                            // If the server redirects to the admin page, reload the page
                            window.location.href = response.url; // Redirect to admin page
                        } else {
                            // Otherwise, display the error message or redirect back to login
                            document.body.innerHTML = 'Authentication failed. Please try again.';
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            }
        </script>
    </head>
    <body>
        <div class="container">
            <h1>Pico W</h1>
            <p>Enter the password to access the file system.</p>
            <form onsubmit="submitForm(event)">
                <input type="password" id="password" placeholder="Enter Password" required>
                <input type="submit" value="Login">
            </form>
        </div>
    </body>
</html>
